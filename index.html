<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Encrypt/Decrypt Text</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #f0f0f0;
            margin: 0;
        }
        
        .container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            width: 400px;
            max-width: 100%;
        }
        
        h1 {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
        }
        
        textarea, input[type="password"] {
            width: 100%;
            padding: 10px;
            box-sizing: border-box;
        }
        
        button {
            padding: 10px 20px;
            margin-right: 10px;
            cursor: pointer;
        }
        
        button:hover {
            background-color: #ddd;
        }
        
        #outputText {
            background-color: #e9e9e9;
        }

        .info {
            margin-top: 20px;
            padding: 10px;
            background: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const passwordInput = document.getElementById('password');
            const inputText = document.getElementById('inputText');
            const outputText = document.getElementById('outputText');
            const encryptButton = document.getElementById('encryptButton');
            const decryptButton = document.getElementById('decryptButton');

            encryptButton.addEventListener('click', () => {
                const password = passwordInput.value;
                if (!password) {
                    alert('Please enter a password.');
                    return;
                }
                const encryptedText = encrypt(inputText.value, password);
                outputText.value = encryptedText;
            });

            decryptButton.addEventListener('click', () => {
                const password = passwordInput.value;
                if (!password) {
                    alert('Please enter a password.');
                    return;
                }
                const decryptedText = decrypt(inputText.value, password);
                outputText.value = decryptedText;
            });

            function encrypt(text, password) {
                const salt = CryptoJS.lib.WordArray.random(128 / 8);
                const key = CryptoJS.PBKDF2(password, salt, {
                    keySize: 256 / 32,
                    iterations: 1000
                });

                const iv = CryptoJS.lib.WordArray.random(128 / 8);
                const encrypted = CryptoJS.AES.encrypt(text, key, { iv: iv });

                // Combine everything: salt + iv + ciphertext
                const result = salt.toString() + iv.toString() + encrypted.toString();
                return result;
            }

            function decrypt(ciphertext, password) {
                const salt = CryptoJS.enc.Hex.parse(ciphertext.substr(0, 32));
                const iv = CryptoJS.enc.Hex.parse(ciphertext.substr(32, 32));
                const encrypted = ciphertext.substr(64);

                const key = CryptoJS.PBKDF2(password, salt, {
                    keySize: 256 / 32,
                    iterations: 1000
                });

                const decrypted = CryptoJS.AES.decrypt(encrypted, key, { iv: iv });
                return decrypted.toString(CryptoJS.enc.Utf8);
            }
        });
    </script>
</head>
<body>
    <div class="container">
        <h1>Encrypt/Decrypt Text</h1>
        <div class="form-group">
            <label for="password">Password:</label>
            <input type="password" id="password">
        </div>
        <div class="form-group">
            <label for="inputText">Input Text:</label>
            <textarea id="inputText" rows="4"></textarea>
        </div>
        <div class="form-group">
            <button id="encryptButton">Encrypt</button>
            <button id="decryptButton">Decrypt</button>
        </div>
        <div class="form-group">
            <label for="outputText">Output Text:</label>
            <textarea id="outputText" rows="4" readonly></textarea>
        </div>
    </div>
    <div class="info">
        <h2>How It Works</h2>
        <p>
            This tool allows you to encrypt and decrypt text using the Advanced Encryption Standard (AES) algorithm, a widely-used symmetric encryption algorithm.
        </p>
        <p>
            <strong>Encryption:</strong> When you encrypt text, the tool generates a random salt and initialization vector (IV). The password you provide is used to derive a key through the PBKDF2 (Password-Based Key Derivation Function 2) algorithm, which involves hashing the password with the salt and performing multiple iterations to produce a secure key. The AES algorithm then encrypts the text using this key and IV. The encrypted result is a combination of the salt, IV, and the encrypted text.
        </p>
        <p>
            <strong>Decryption:</strong> To decrypt text, the tool extracts the salt and IV from the encrypted text. It then uses the same password to derive the key through PBKDF2, and the AES algorithm decrypts the text using this key and IV.
        </p>
        <p>
            <strong>Encryption Details:</strong> 
            <ul>
                <li><strong>Algorithm:</strong> AES (Advanced Encryption Standard)</li>
                <li><strong>Key Size:</strong> 256 bits (32 bytes)</li>
                <li><strong>IV Size:</strong> 128 bits (16 bytes)</li>
                <li><strong>Iterations (for PBKDF2):</strong> 1000</li>
            </ul>
        </p>
    </div>
</body>
</html>
